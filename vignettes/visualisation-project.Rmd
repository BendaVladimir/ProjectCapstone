---
title: "Visualisation of NOAA data"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{Visualisation of NOAA data}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```

```{r setup}
library(ProjectCapstone)
```

This package is used to visualize data for earthquake data.

Functions used in this package are 

% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/eq_clean_data.R
\name{eq_clean_data}
\alias{eq_clean_data}
\title{Function is run to clean data from NOAA and transforms to prescribed form}
\usage{
eq_clean_data(dataframe)
}
\arguments{
\item{x}{A numeric vector of values}
}
\description{
This function used to clean data from NOAA. File is loaded to dataframe from 
TSV file in gz file. first part of function is used to create bce variable,
which is used to determine which function will be used to transform to data. 
In case that there is a negative sign then parse_bce_ymd will be used to transform 
date variable. YEAR, MONTH and DAY will be transformed to string character and padded 
to have format YYYY MM DD. Creation of date is dependent on bce variable. If bce
variable is TRUE then parse_bce_ymd function will be used. 
Final part of function is used to transform LATITUDE and LONGITUDE to numerical
format.
}
\examples{
\dontrun{
filename<-system.file("data","earthquakes.tsv.gz",package="ProjectCapstone")
dataframe <- read_delim(filename)
eq_clean_data(dataframe)
}

}

% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/creating_proto.R
\name{eq_create_label}
\alias{eq_create_label}
\title{Creates popup text for markers.}
\usage{
eq_create_label(eq_clean = NULL)
}
\arguments{
\item{eq_clean}{The clean earthquake data in a tbl_df object.}
}
\value{
This function returns a character vector containing popup text to be used in a leaflet visualization.
}
\description{
This function generates HTML formatted text to be used in popups for map markers.
}
\examples{
\dontrun{
filename<-system.file("data","earthquakes_data.txt.zip",package="capstone")
eq_location_clean(eq_clean_data(eq_data_read(filename))) \%>\%
dplyr::filter(COUNTRY == "MEXICO" & lubridate::year(datetime) >= 1980) \%>\%
dplyr::mutate(popup_text = eq_create_label(.)) \%>\%
 eq_map(annot_col = "popup_text")
}

}

% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/eq_location_clean.R
\name{eq_location_clean}
\alias{eq_location_clean}
\title{Cleaning variable LOCATION_NAME from inclusion of COUNTRY}
\usage{
eq_location_clean(dataframe)
}
\arguments{
\item{dataframe}{Dataframe to be transformed}
}
\description{
Function will be used to transform column LOCATION_NAME to clean form.
First part of process is removing COUNTRY from LOCATION_NAME with function 
str_remove_all.
Secund part is transforming LOCATION_NAME to title caps.
Final part of function str_remove_all is used to replace : and ; 
in LOCATION_NAME to clean string.
}
\examples{
\dontrun{
filename<-system.file("data","earthquakes.tsv.gz",package="ProjectCapstone")
dataframe <- read_delim(filename)
dataframe <- eq_clean_data(dataframe)
eq_clean_data(dataframe)
}

}

% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/creating_proto.R
\name{eq_map}
\alias{eq_map}
\title{Earthquakes Data in an Interactive Map.}
\usage{
eq_map(eq_clean = NULL, annot_col = "datetime")
}
\arguments{
\item{eq_clean}{The clean earthquake data in a tbl_df object.}

\item{annot_col}{Column in the tbl_df object to be used for annotation.}
}
\value{
This function returns an interactive map.
}
\description{
The Earthquakes will be mapped centered with their latitude and
longitude "epicenter". The epicenter is annotated based on an annot_col which the user can specify.
In addition, if the user specifies "popup_text" then a call to eq_create_label generates
the appropriate text for the popup.
}
\note{
If an invalid column name is provided, the function provides a warning
and uses the LOCATION_NAME column as teh annotation column.
}
\examples{
\dontrun{
filename<-system.file("data","earthquakes_data.txt.zip",package="capstone")
eq_location_clean(eq_clean_data(eq_data_read(filename))) \%>\%
dplyr::filter(COUNTRY == "MEXICO" & lubridate::year(datetime) >= 1980) \%>\%
eq_map(annot_col = "datetime")
}

}
\references{
\url{http://rstudio.github.io/leaflet/}
}

% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/creating_proto.R
\name{geom_timeline}
\alias{geom_timeline}
\title{Function that will use the GeomTimeLine Prototype Function required to Plot a Timeline with the Earthquakes of a given country}
\usage{
geom_timeline(
  mapping = NULL,
  data = NULL,
  na.rm = TRUE,
  position = "identity",
  stat = "identity",
  show.legend = NA,
  inherit.aes = TRUE,
  ...
)
}
\arguments{
\item{mapping}{aesthetic mappings created by aes}

\item{data}{is the dataframe that contains the Earthquake's data}

\item{na.rm}{will hepls to remove the NA values from the data frame}

\item{position}{position adjustment functio}

\item{stat}{The Layer's statistical transformation}

\item{show.legend}{layer's legend}

\item{inherit.aes}{will indicate the default aesthetics overridng}

\item{...}{layer's other arguments}
}
\value{
In a plot an Earthquakes timeline which contains all Earthquakes of a Given Country or List of Countries between a set of dates
}
\description{
Function that will use the GeomTimeLine Prototype Function required to Plot a Timeline with the Earthquakes of a given country
}
\examples{
\dontrun{
filename<-system.file("data","earthquakes_data.txt.zip",package="capstone")
eq_location_clean(eq_clean_data(eq_data_read(filename))) \%>\%
dplyr::filter(datetime >= "1980-01-01" & datetime <="2014-01-01" & COUNTRY == c("MEXICO","USA", "JORDAN"))\%>\%
ggplot() +
geom_timeline(aes(x = datetime, size = EQ_MAG_ML, colour = DEATHS, fill = DEATHS))
}

}

% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/creating_proto.R
\name{geom_timeline_label}
\alias{geom_timeline_label}
\title{Funcion for adding the Eartquakes's Location labels to an Earthquake's timeline}
\usage{
geom_timeline_label(
  mapping = NULL,
  data = NULL,
  na.rm = TRUE,
  show.legend = NA,
  stat = "identity",
  position = "identity",
  inherit.aes = TRUE,
  ...
)
}
\arguments{
\item{mapping}{aesthetic mappings created by aes}

\item{data}{is the dataframe that contains the Earthquake's data}

\item{na.rm}{will hepls to remove the NA values from the data frame}

\item{show.legend}{layer's legend}

\item{stat}{The Layer's statistical transformation}

\item{position}{position adjustment functio}

\item{inherit.aes}{will indicate the default aesthetics overridng}

\item{...}{layer's other arguments}
}
\value{
the Earthquake's labels
}
\description{
Funcion for adding the Eartquakes's Location labels to an Earthquake's timeline
}
\examples{
\dontrun{
filename<-system.file("data","earthquakes_data.txt.zip",package="capstone")
eq_location_clean(eq_clean_data(eq_data_read(filename))) \%>\%
dplyr::filter(datetime >= "1980-01-01" & datetime <="2014-01-01" & COUNTRY == c("MEXICO","USA", "JORDAN"))\%>\%
ggplot() +
geom_timeline(aes(x = datetime, y = COUNTRY, size = EQ_MAG_ML, colour = DEATHS, fill = DEATHS)) +
geom_timeline_label(aes(x = datetime, y = COUNTRY, label = LOCATION_NAME, number = 3, max_aes = EQ_MAG_ML))
}

}

% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/creating_proto.R
\docType{data}
\name{GeomTimeline}
\alias{GeomTimeline}
\title{Funcion for ploting an Earthquake's Location timeline building a GEOM Function from scratch
The GeomTimeLine will use a Dataframe compiled using the function eq_clean_data.
The GeomTimeLine function is a prototype function which will be used as foundation for our geom_timeline function.
The GeomTimeLine function will take advantage of the ggplot2's geom_point.
Using the Earthquakes' dates as X-axis main values, the Y-axis value will be not relevant while plotting a timeline horizontal bar
The geom_point's size and colour will be defined by the Earthquake's magnitude
The GeomTimeLine was build using the Function Prototype provided in the Course's Material 4.7.1 Building a New Geom}
\format{
An object of class \code{GeomTimeline} (inherits from \code{Geom}, \code{ggproto}, \code{gg}) of length 5.
}
\usage{
GeomTimeline
}
\description{
Funcion for ploting an Earthquake's Location timeline building a GEOM Function from scratch
The GeomTimeLine will use a Dataframe compiled using the function eq_clean_data.
The GeomTimeLine function is a prototype function which will be used as foundation for our geom_timeline function.
The GeomTimeLine function will take advantage of the ggplot2's geom_point.
Using the Earthquakes' dates as X-axis main values, the Y-axis value will be not relevant while plotting a timeline horizontal bar
The geom_point's size and colour will be defined by the Earthquake's magnitude
The GeomTimeLine was build using the Function Prototype provided in the Course's Material 4.7.1 Building a New Geom
}
\keyword{datasets}

% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/parse_bce_ymd.R
\name{parse_bce_ymd}
\alias{parse_bce_ymd}
\title{Function creates dates before new era}
\usage{
parse_bce_ymd(str)
}
\arguments{
\item{str}{Input string of date that will be transformed to BCE}
}
\description{
There is a problem with transforming negative dates to BCE calendar with as_date
function. This function creates date before BCE when string is passed to function.
}
\examples{
parse_bce_ymd("1991-01-01")

}
